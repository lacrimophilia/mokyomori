<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ëª©ìš”ëª¨ë¦¬</title>
<style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Noto Sans KR", sans-serif;
      background-color: #ffffff;
    }
    .forest {
      position: relative;
      min-height: 100vh;
      padding: 60px 20px 40px;
      background: linear-gradient(to bottom, #ffffff 0%, #eaf9e5 100%);
    }
    .tree, .subscriber {
      position: absolute;
      width: 64px;
      height: 100px;
      cursor: pointer;
    }
    .tree svg, .subscriber svg {
      width: 64px;
      height: 100%;
    }
    .footer {
      text-align: center;
      padding: 30px;
      color: #777;
      font-size: 14px;
    }
    h1 {
      text-align: center;
      margin-top: 40px;
      font-weight: 500;
      color: #2e5f3e;
      font-size: 2em;
    }
    .popup, .email-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border: 1px solid #ccc;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      z-index: 999;
    }
    input[type="email"] {
      width: 100%;
      padding: 8px;
      margin-top: 10px;
    }
    button {
      margin-top: 10px;
      padding: 8px 16px;
    }
  </style>
</head>
<body>
<h1>ëª©ìš”ëª¨ë¦¬ æœ¨æ›œæ£®</h1>
<div class="forest" id="forest"></div>
<div class="footer">ëª©ìš”ì¼ë§ˆë‹¤ ëŠìŠ¨í•˜ê²Œ ìˆ²ì„ ê°€ê¿‰ë‹ˆë‹¤.ğŸŒ¿<br/>Â© 2025 mokyomori</div>
<script>
    const forest = document.getElementById("forest");
    const posts = [
      { title: "love-tree", tag: "ì‚¬ë‘" },
      { title: "2025-07-04-start", tag: "ì‚¬ë‘" },
      { title: "summer-light", tag: "ì—¬ë¦„" },
      { title: "care-memory", tag: "ëŒë´„" },
      { title: "like-a-movie", tag: "ì˜í™”" },
      { title: "body-language", tag: "ëª¸" }
    ];
    const tagMap = {};
    posts.forEach(post => {
      if (!tagMap[post.tag]) tagMap[post.tag] = [];
      tagMap[post.tag].push(post.title);
    });

    const tagPositions = {
      ì‚¬ë‘: { x: 15, y: 20 },
      ì—¬ë¦„: { x: 35, y: 50 },
      ëŒë´„: { x: 55, y: 40 },
      ì˜í™”: { x: 70, y: 25 },
      ëª¸: { x: 40, y: 70 }
    };
    const tagColors = {
      ì‚¬ë‘: "#7fc97f",
      ì—¬ë¦„: "#66c2a5",
      ëŒë´„: "#b2df8a",
      ì˜í™”: "#a6d854",
      ëª¸: "#3288bd"
    };

    function extractDate(title) {
      const match = title.match(/^\d{4}-\d{2}-\d{2}/);
      return match ? new Date(match[0]) : null;
    }

    let latestDate = null;
    posts.forEach(p => {
      const d = extractDate(p.title);
      if (d && (!latestDate || d > latestDate)) latestDate = d;
    });

    Object.entries(tagMap).forEach(([tag, titles]) => {
      const count = titles.length;
      const pos = tagPositions[tag] || { x: Math.random() * 80 + 10, y: Math.random() * 60 + 20 };
      const div = document.createElement("div");
      div.className = "tree";
      div.style.left = `${pos.x}%`;
      div.style.top = `${pos.y}%`;

      const leafColor = tagColors[tag] || "#3ca370";
      const leafRadius = 12 + (count - 1) * 4;
      const trunkHeight = 20 + (count - 1) * 8;
      const trunkColor = titles.some(t => extractDate(t)?.getTime() === latestDate?.getTime()) ? "#b9a074" : "#8b5a2b";

      div.innerHTML = `
        <svg viewBox="0 0 64 100">
          <rect x="28" y="${100 - trunkHeight}" width="8" height="${trunkHeight}" fill="${trunkColor}" />
          <circle cx="32" cy="${100 - trunkHeight - leafRadius}" r="${leafRadius}" fill="${leafColor}" />
        </svg>
      `;
      div.onclick = () => {
        if (titles.length === 1) {
          window.location.href = `posts/${encodeURIComponent(titles[0])}.html`;
        } else {
          const overlay = document.createElement("div");
          overlay.className = "overlay";
          const popup = document.createElement("div");
          popup.className = "popup";
          popup.innerHTML = `<h3>on ${tag}</h3><p>${titles.map(title => `â€¢ <a href="posts/${encodeURIComponent(title)}.html">${title}</a>`).join("<br>")}</p>`;
          overlay.onclick = () => {
            document.body.removeChild(popup);
            document.body.removeChild(overlay);
          };
          document.body.appendChild(overlay);
          document.body.appendChild(popup);
        }
      };
      forest.appendChild(div);
    });
</script>
</body>
</html>
